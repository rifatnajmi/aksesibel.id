{% extends 'partials/base.html.twig' %}
{% block content %}
{% include 'partials/sidebar.html.twig' %}
<main class="col-lg-9 col-xl-10">
	<nav class="post-navigation justify-content-between mb-1" style="--bs-breadcrumb-divider: '/';" aria-label="Breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="{{ base_url }}">Beranda</a></li>
			<li class="breadcrumb-item visually-hidden" aria-current="page">{{ page.title }}</li>
		</ol>
	</nav>
	<article id="utama" class="row justify-content-center">
		<header class="col-md-12">
			<h1 class="post-title">
				{{ page.title }}
			</h1>
		</header>
		<section class="post-content col-md-12 content">
			<div class="glosarium-container">

				{% set directory = grav.flex_objects.getDirectory('glosarium') %}
				{% set collection = directory.getCollection() %}
				{% set sorted = collection|sort %}

				{% if collection is not empty %}
				{% set grouped = {} %}
				{% set numeric_group = [] %}

				{% for object in collection %}
				{% set first = object.title|first|upper %}
				{% if first matches '/[0-9]/' %}
				{% set numeric_group = numeric_group|merge([object]) %}
				{% else %}
				{% if grouped[first] is not defined %}
				{% set grouped = grouped|merge({(first): []}) %}
				{% endif %}
				{% set grouped = grouped|merge({(first): grouped[first]|merge([object])}) %}
				{% endif %}
				{% endfor %}


				<div class="alphabet-nav my-2">
					{% if numeric_group is not empty %}
					<a href="#numeric" class="btn btn-primary btn-sm me-1">#</a>
					{% endif %}
					{% for letter in grouped|keys|sort %}
					<a href="#{{ letter|lower }}" class="btn btn-primary btn-sm me-1">{{ letter }}</a>
					{% endfor %}
				</div>

				{% if numeric_group is not empty %}
				<div id="numeric" class="group-section mt-2">
					<h2>#</h2>
					{% for obj in numeric_group %}
					{% include 'partials/glosarium-item.html.twig' with { object: obj } %}
					{% endfor %}
				</div>
				<hr>
				{% endif %}

				{% for letter, objects in grouped %}
				<div id="{{ letter|lower }}" class="group-section mt-2">
					<h2>{{ letter }}</h2>
					{% for obj in objects %}
					{% include 'partials/glosarium-item.html.twig' with { object: obj } %}
					{% endfor %}
				</div>
				<hr>
				{% endfor %}

				{% else %}
				<p>Tidak ada entri glosarium.</p>
				{% endif %}
			</div>
		</section>
	</article>
</main>

{% endblock %}
